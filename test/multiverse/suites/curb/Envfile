suite_condition("Curb is not useful on JRuby") do
  RUBY_PLATFORM != 'java'
end

gemfile <<-RB
  gem 'curb', '~> 0.9.4'
  gem 'rack'
  gem 'json', :platforms => [:rbx, :mri_18]

  # We try translating URIs through Addressable if it's there, so test with it.
  gem 'addressable', :require => 'addressable/uri'
  gem 'public_suffix', '< 3.0.0' if RUBY_VERSION < "2.1.0"
RB

gemfile <<-RB
  gem 'curb', '0.9.4'
  gem 'rack'
  gem 'json', :platforms => [:rbx, :mri_18]
RB

gemfile <<-RB
  gem 'curb', '~> 0.9.8'
  gem 'rack'
  gem 'json', :platforms => [:rbx, :mri_18]
RB

# Older curb's than 0.8.6 don't build against Ruby 2.2.0
if RUBY_VERSION < "2.2.0"
gemfile <<-RB
  gem 'curb', '0.8.1'
  gem 'rack'
  gem 'json', :platforms => [:rbx, :mri_18]
RB
end
